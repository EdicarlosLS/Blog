<!DOCTYPE html>
<html xmlns:th="http://thymeleaf.org"
      xmlns:layout ="http://www.ultraq.net.nz/thymeleaf/layout">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width">
		<title></title>
		<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
		<link rel="stylesheet" th:href="@{/css/style.css}">
	</head>
	<body>
		<div th:replace="fragments::header"></div>

		<main class="container">
			<div class="row">
				<div class="col s12">
					<h1 th:text="${postagem.titulo}"></h1>
					<span><b>Autor:</b> <p th:text="${postagem.usuario.nome}"></p></span><br>
					<span>Postado em: <p th:text="${#dates.format(postagem.dataPostagem, 'dd MMM YYYY')}"></p></span>
					<span>Atualizado em: <p th:text="${#dates.format(postagem.dataAtualizacao, 'dd MMM YYYY')}"></p></span>
				</div>
				<div class="col s12">
					<img th:src="@{/img/mine.jpeg}" style="width:100%;"/>
				</div>
				<div class="col s12">
					<p th:text="${postagem.conteudo}"></p>
				</div>
			</div>
			<form th:if="${session.usuario != null AND session.usuario.id == postagem.usuario.id}" th:action="${'/postagens/'+{postagem.id}}" th:method="DELETE">
				<a th:href="@{/postagens/{id}/editar(id=${postagem.id})}" class="btn orange" >Editar</a>	
				<button type="submit" class="btn red" >Apagar</button>	
			</form>

			<section class="row">
				<h6 class="col s12">Comentários</h6>
				<div th:if="${session.usuario != null}" class="col s12">
					<form th:action="@{/postagens/{id}/comentar(id=${postagem.id})}" method="post">
						<div class="input-field">

							<label for="comentario">Deixe seu comentário</label>
							<input type="text" name="conteudo" id="comentario">
						</div>
						<button type="submit" class="btn">comentar</button>
					</form>
				</div>
				<div th:if="${comentarios != null}" th:each="comentario : ${comentarios}" class="row">
					<span th:text="${comentario.usuario.nome} + ' - ' + ${#dates.format(comentario.dataPublicacao, 'dd MMM YYYY')}"></span>
					<span th:text="${comentario.conteudo}"></span>
				</div>
			</section>
		</main>

		<div th:replace="fragments::footer"></div>

		<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
		<script th:src="@{/js/main.js}"></script>
	</body>
</html>
